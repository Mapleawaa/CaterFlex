<!--pages/register/register.wxml-->
<view class="register-container">
  <!-- å¤´éƒ¨ -->
  <view class="header-section">
    <view class="logo-area">
      <view class="app-logo">ğŸ½ï¸</view>
      <view class="app-name">é¤é¥®çµæ´»ç”¨å·¥</view>
      <view class="register-title">ç”¨æˆ·æ³¨å†Œ</view>
    </view>
  </view>

  <!-- ç”¨æˆ·ç±»å‹é€‰æ‹© -->
  <view class="user-type-section">
    <view class="type-options">
      <view 
        class="type-option {{userType === 'worker' ? 'active' : ''}}"
        bindtap="onUserTypeChange"
        data-type="worker"
      >
        æ±‚èŒè€…æ³¨å†Œ
      </view>
      <view 
        class="type-option {{userType === 'company' ? 'active' : ''}}"
        bindtap="onUserTypeChange"
        data-type="company"
      >
        ä¼ä¸šæ³¨å†Œ
      </view>
    </view>
  </view>

  <!-- æ³¨å†Œè¡¨å• -->
  <view class="form-section">
    <!-- æ‰‹æœºå· -->
    <view class="form-item">
      <input
        class="form-input"
        value="{{formData.phone}}"
        placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
        type="number"
        maxlength="11"
        bindinput="onInputChange"
        data-field="phone"
      />
      <view class="error-text" wx:if="{{errors.phone}}">{{errors.phone}}</view>
    </view>

    <!-- éªŒè¯ç  -->
    <view class="form-item verify-code-item">
      <input
        class="form-input verify-input"
        value="{{formData.verifyCode}}"
        placeholder="è¯·è¾“å…¥éªŒè¯ç "
        type="number"
        maxlength="6"
        bindinput="onInputChange"
        data-field="verifyCode"
      />
      <button
        class="verify-btn {{countdown > 0 ? 'disabled' : ''}}"
        disabled="{{countdown > 0 || sendingCode}}"
        bindtap="onSendCode"
      >
        {{countdown > 0 ? countdown + 's' : 'è·å–éªŒè¯ç '}}
      </button>
      <view class="error-text" wx:if="{{errors.verifyCode}}">{{errors.verifyCode}}</view>
    </view>

    <!-- å¯†ç  -->
    <view class="form-item">
      <input
        class="form-input"
        value="{{formData.password}}"
        placeholder="è¯·è®¾ç½®å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰"
        password="{{!showPassword}}"
        bindinput="onInputChange"
        data-field="password"
      />
      <view class="input-suffix" bindtap="onTogglePassword" data-type="showPassword">
        {{showPassword ? 'éšè—' : 'æ˜¾ç¤º'}}
      </view>
      <view class="error-text" wx:if="{{errors.password}}">{{errors.password}}</view>
    </view>

    <!-- ç¡®è®¤å¯†ç  -->
    <view class="form-item">
      <input
        class="form-input"
        value="{{formData.confirmPassword}}"
        placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç "
        password="{{!showConfirmPassword}}"
        bindinput="onInputChange"
        data-field="confirmPassword"
      />
      <view class="input-suffix" bindtap="onTogglePassword" data-type="showConfirmPassword">
        {{showConfirmPassword ? 'éšè—' : 'æ˜¾ç¤º'}}
      </view>
      <view class="error-text" wx:if="{{errors.confirmPassword}}">{{errors.confirmPassword}}</view>
    </view>

    <!-- æ±‚èŒè€…ä¿¡æ¯ -->
    <block wx:if="{{userType === 'worker'}}">
      <view class="form-item">
        <input
          class="form-input"
          value="{{formData.name}}"
          placeholder="è¯·è¾“å…¥çœŸå®å§“å"
          bindinput="onInputChange"
          data-field="name"
        />
        <view class="error-text" wx:if="{{errors.name}}">{{errors.name}}</view>
      </view>

      <view class="form-item">
        <input
          class="form-input"
          value="{{formData.idCard}}"
          placeholder="è¯·è¾“å…¥èº«ä»½è¯å·"
          bindinput="onInputChange"
          data-field="idCard"
        />
        <view class="error-text" wx:if="{{errors.idCard}}">{{errors.idCard}}</view>
      </view>
    </block>

    <!-- ä¼ä¸šä¿¡æ¯ -->
    <block wx:if="{{userType === 'company'}}">
      <view class="form-item">
        <input
          class="form-input"
          value="{{formData.companyName}}"
          placeholder="è¯·è¾“å…¥ä¼ä¸šåç§°"
          bindinput="onInputChange"
          data-field="companyName"
        />
        <view class="error-text" wx:if="{{errors.companyName}}">{{errors.companyName}}</view>
      </view>

      <view class="form-item">
        <input
          class="form-input"
          value="{{formData.businessLicense}}"
          placeholder="è¯·è¾“å…¥è¥ä¸šæ‰§ç…§å·"
          bindinput="onInputChange"
          data-field="businessLicense"
        />
        <view class="error-text" wx:if="{{errors.businessLicense}}">{{errors.businessLicense}}</view>
      </view>

      <view class="form-item">
        <input
          class="form-input"
          value="{{formData.contactPerson}}"
          placeholder="è¯·è¾“å…¥è”ç³»äººå§“å"
          bindinput="onInputChange"
          data-field="contactPerson"
        />
        <view class="error-text" wx:if="{{errors.contactPerson}}">{{errors.contactPerson}}</view>
      </view>
    </block>

    <!-- åè®®åŒæ„ -->
    <view class="agreement-section">
      <checkbox-group bindchange="onAgreeChange">
        <label class="agreement-label">
          <checkbox value="agree" checked="{{formData.agreeTerms}}" />
          æˆ‘å·²é˜…è¯»å¹¶åŒæ„
          <text class="link-text">ã€Šç”¨æˆ·åè®®ã€‹</text>
          å’Œ
          <text class="link-text">ã€Šéšç§æ”¿ç­–ã€‹</text>
        </label>
      </checkbox-group>
      <view class="error-text" wx:if="{{errors.agreeTerms}}">{{errors.agreeTerms}}</view>
    </view>

    <!-- æ³¨å†ŒæŒ‰é’® -->
    <view class="submit-section">
      <button
        class="submit-btn {{loading ? 'loading' : ''}}"
        disabled="{{loading}}"
        bindtap="onSubmit"
      >
        {{loading ? 'æ³¨å†Œä¸­...' : 'ç«‹å³æ³¨å†Œ'}}
      </button>
    </view>

    <!-- ç™»å½•é“¾æ¥ -->
    <view class="login-link">
      <text>å·²æœ‰è´¦å·ï¼Ÿ</text>
      <text class="link-text" bindtap="onGoLogin">ç«‹å³ç™»å½•</text>
    </view>
  </view>
</view>